rowkey设计  + 预分区:
原则:  唯一性  散列性  长度

场景: 大量的运营商的通话数据

      1388888888(主叫) 13999999999(被叫) 2021-05-14 12:12:12  360 ......
业务: 查询某个用户 某天  某月  某年 的通话记录

预分区: 预计规划50个分区 .

-∞  ~  00|
00| ~  01|
01| ~  02|
.......

分析:  假如将某个用户某天的数据存到一个分区中. 查某天的数据只需要扫描一个分区
       加入将某个用户某月的数据存到一个分区中. 查某天 某月的数据只需要扫描一个分区.


rowkey: 01_1388888888_2021-05-14 12:12:12  ->  1388888888_2021-05 % 分区数  = 01
		01_1388888888_2021-05-15 12:12:12  ->  1388888888_2021-05 % 分区数  = 01
		01_1388888888_2021-05-16 12:12:12
		01_1388888888_2021-05-17 12:12:12


        03_1377777777_2021-05-16 12:12:12  ->  1377777777_2021-05 % 分区数  = 03


验证:
查询  1388888888 用户 2020年08月的通话记录
  1) 先计算分区号
     1388888888_2020-08  % 50  = 04
  2) rowkey
     04_1388888888_2020-08-........
  3) scan
     scan "teldata" ,{STARTROW=> '04_1388888888_2020-08' STOPROW=> '04_1388888888_2020-08|'}

查询  1388888888 用户 2020年08月08日的通话记录
  1) 先计算分区号
     1388888888_2020-08  % 50  = 04
  2) rowkey
     04_1388888888_2020-08-08........
  3) scan
     scan "teldata" ,{STARTROW=> '04_1388888888_2020-08-08' STOPROW=> '04_1388888888_2020-08-08|'}

查询  1388888888 用户 2020年08月 和 09月的通话记录

  1) 先计算分区号
     1388888888_2020-08  % 50  = 04
     1388888888_2020-09  % 50  = 06
  2) rowkey
     04_1388888888_2020-08-........
     06_1388888888_2020-09-........
  3) scan
     scan "teldata" ,{STARTROW=> '04_1388888888_2020-08' STOPROW=> '04_1388888888_2020-08|'}
     scan "teldata" ,{STARTROW=> '06_1388888888_2020-09' STOPROW=> '06_1388888888_2020-09|'}

查询  1388888888 用户 2020年08月09日 和 10日的通话记录

  1) 先计算分区号
     1388888888_2020-08  % 50  = 04
  2) rowkey
     04_1388888888_2020-08-09........
     04_1388888888_2020-08-09........
     04_1388888888_2020-08-10........
  3) scan
     scan "teldata" ,{STARTROW=> '04_1388888888_2020-08-09' STOPROW=> '04_1388888888_2020-08-10|'}